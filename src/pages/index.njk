{% extends "layout.njk" %}

{% block pageContent %}

    {% import "macros/portfolio-item.njk" as portfolioItem %}
    {% import "macros/officer-badge.njk" as officerBadge %}

    <header class="masthead">
        <div class="container">
            <img class="img-fluid rounded-circle logo-container" src="{{_config.site.paths.images}}/gdclogo.png">
            <div class="intro-text">
                <h1 class="name">K-State GDC</h1>
                <span class="description">
                    K-Stateâ€™s Game Development Club is the club to be in at K-State. We get together every week
                    to develop every kind of game imaginable. We welcome all majors and skill levels to join us as we discuss
                    aspects of game development, gaming trends, and just about anything else our members want to discuss. To see
                    the games we are working on check below.
                </span>
            </div>
        </div>
    </header>

    <section id="featured">
        <div class="container text-center">
            <h2 class="mobile-header text-center">Featured</h2>

            {# <div class="row">
                <div class="col">
                    <button id="showFeaturedGamesBtn" class="btn btn-success featured-btn">Games</button>
                </div>
            </div> #}

            <div id="featuredContent">
                <hr class="hr-primary">
                <div id="featuredContent_games">
                    <div class="portfolio-content">
                        <div class="row">

                            {% for game in portfolio.games %}
                                <div class="col">
                                    {{portfolioItem.create(game, {_config:_config})}}
                                </div>
                            {% endfor %}

                        </div>
                    </div>
                    <div>
                        <button class="btn btn-success featured-btn show-more-btn">Show more</button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="success" id="officers">
        <div class="container">
            <h2 class="mobile-header text-center">Meet the Team</h2>
            <hr class="hr-light">
            <div class="row">
                <div class="col-lg ml-auto">
                    <div class="row">

                        {% for officer in officers.row1 %}
                            <div class="col-sm-3 col-4">
                                {{officerBadge.create(officer, {_config:_config})}}
                            </div>
                        {% endfor %}

                    </div>
                    <div class="row">
                        <div class="col-1"></div>

                        {% for officer in officers.row2 %}
                            <div class="col">
                                {{officerBadge.create(officer, {_config:_config})}}
                            </div>
                        {% endfor %}

                        <div class="col-1"></div>
                    </div>
                </div>
            </div>
        </div>
    </section>
{% endblock %}

{% block pageStyle %}
    <style>
        .show-more-btn {
            transform: scale(.7);
        }

        .portfolio-content {
            overflow: hidden;
            line-height: 1em;
            height: 11.5em;
        }
    </style>
{% endblock %}

{% block pageScript %}
    <script>
        $('.show-more-btn').click(function () {
            const $this = $(this);
            const $content = $this
                .parent()
                .prev('div.portfolio-content:first');
            if ($this.text().toUpperCase() === 'SHOW MORE') {
                const curHeight = $content.height();
                const autoHeight = $content
                    .css('height', 'auto')
                    .height();
                $content.height(curHeight);
                $content.animate({
                    height: autoHeight
                }, 250);
                $this.text('Show less');
            } else {
                $content.animate({
                    height: '11.5em'
                }, 250);
                $this.text('Show more');
            }
        });
    </script>
{% endblock %}